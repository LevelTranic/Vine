From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: 404Setup <153366651+404Setup@users.noreply.github.com>
Date: Mon, 8 Jul 2024 20:09:11 +0800
Subject: [PATCH] Divine: Fix MC-2025

Original code by NONPLAYT
You can find the original code on https://github.com/DivineMC/DivineMC

Original post on Mojira: https://bugs.mojang.com/browse/MC-2025
Fix taken from Reddit: https://redd.it/8pgd4q

diff --git a/src/main/java/net/minecraft/world/entity/Entity.java b/src/main/java/net/minecraft/world/entity/Entity.java
index 1390bc0f51ea2c957e470135eba1564f02840de9..85253a71c4134513d5fdefc5f60c6c969999e455 100644
--- a/src/main/java/net/minecraft/world/entity/Entity.java
+++ b/src/main/java/net/minecraft/world/entity/Entity.java
@@ -2609,6 +2609,17 @@ public abstract class Entity implements SyncedDataHolder, Nameable, EntityAccess
 
             nbttagcompound.put("Vine.Storage", vineStorage); // Vine - vine data bundler
             nbttagcompound.put("Leaves.Data", leavesData); // Leaves - leaves ex data
+
+            // DivineMC start - Fix MC-2025
+            // This fix was taken from Reddit: https://redd.it/8pgd4q
+            AABB boundingBox = getBoundingBox();
+            ListTag boundingBoxList = new ListTag();
+            for (double coord : new double[]{boundingBox.minX, boundingBox.minY, boundingBox.minZ, boundingBox.maxX, boundingBox.maxY, boundingBox.maxZ}) {
+                boundingBoxList.add(DoubleTag.valueOf(coord));
+            }
+            nbttagcompound.put("DivineMC.BoundingBox", boundingBoxList);
+            // DivineMC end
+
             return nbttagcompound;
         } catch (Throwable throwable) {
             CrashReport crashreport = CrashReport.forThrowable(throwable, "Saving entity NBT");
